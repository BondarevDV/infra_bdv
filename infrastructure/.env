
# ==============================================================================
# DevOps/MLOps Infrastructure Environment Variables
# ==============================================================================

# ------------------------------------------------------------------------------
# Общие настройки
# ------------------------------------------------------------------------------
COMPOSE_PROJECT_NAME=devops-mlops-stack
NETWORK_NAME=devops-network

# ------------------------------------------------------------------------------
# PostgreSQL Database
# ------------------------------------------------------------------------------
POSTGRES_USER=admin
POSTGRES_PASSWORD=securepassword123
POSTGRES_DB=main
POSTGRES_MULTIPLE_DATABASES=clearml,clearml_events,lakefs,gitlab,sonarqube,nexus,label_studio,keycloak
# ------------------------------------------------------------------------------
# Jenkins CI/CD
# ------------------------------------------------------------------------------
JENKINS_AGENT_SECRET=jenkins_agent_secret_789
JENKINS_HTTP_PORT=8010
JENKINS_AGENT_PORT=50000

# ------------------------------------------------------------------------------
# ClearML MLOps Platform
# ------------------------------------------------------------------------------
CLEARML_SECRET=clearml_secret_456
CLEARML_WEB_PORT=8008
CLEARML_FILES_PORT=8081

# ------------------------------------------------------------------------------
# MinIO S3 Storage
# ------------------------------------------------------------------------------
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin123
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_DEFAULT_BUCKETS=dvc-storage,ml-data,label-studio-data,models

# ------------------------------------------------------------------------------
# LakeFS Data Versioning
# ------------------------------------------------------------------------------
LAKEFS_ENCRYPT_SECRET=lakefs_secret_789_secure_key
LAKEFS_UI_PORT=8000

# ------------------------------------------------------------------------------
# Label Studio Data Labeling
# ------------------------------------------------------------------------------
LABEL_STUDIO_PORT=8020
LABEL_STUDIO_DATA_PORT=8084
LABEL_STUDIO_USER=admin@labelstudio.com
LABEL_STUDIO_PASSWORD=labelstudio123
LABEL_STUDIO_SECRET_KEY=ls_secret_key_789_very_secure
LABEL_STUDIO_S3_ACCESS_KEY=minioadmin
LABEL_STUDIO_S3_SECRET_KEY=minioadmin123
LABEL_STUDIO_S3_ENDPOINT=http://minio:9000
LABEL_STUDIO_S3_BUCKET=label-studio-data
LABEL_STUDIO_S3_REGION=us-east-1

# ------------------------------------------------------------------------------
# GitLab
# ------------------------------------------------------------------------------
GITLAB_ROOT_PASSWORD=gitlabpassword123
GITLAB_HTTP_PORT=8082
GITLAB_HTTPS_PORT=443
GITLAB_SSH_PORT=7090

# ------------------------------------------------------------------------------
# SonarQube
# ------------------------------------------------------------------------------
SONARQUBE_PORT=9000

# ------------------------------------------------------------------------------
# Nexus Repository
# ------------------------------------------------------------------------------
NEXUS_PORT=8081

# ------------------------------------------------------------------------------
# ELK Monitoring Stack
# ------------------------------------------------------------------------------
ELASTICSEARCH_PORT=9200
KIBANA_PORT=5601
LOGSTASH_PORT=5044

# ------------------------------------------------------------------------------
# ML Studio (JupyterLab)
# ------------------------------------------------------------------------------
ML_STUDIO_PORT=8888
ML_STUDIO_PASSWORD=mlstudio123
ML_STUDIO_WORKSPACE=/home/jovyan/work
ML_STUDIO_IMAGE=jupyter/tensorflow-notebook:latest

# ------------------------------------------------------------------------------
# Redis
# ------------------------------------------------------------------------------
REDIS_PORT=6379

# ------------------------------------------------------------------------------
# Docker Registry (если будет добавлен)
# ------------------------------------------------------------------------------
REGISTRY_PORT=5000
REGISTRY_STORAGE=s3://minio:9000/registry

# ------------------------------------------------------------------------------
# S3 Endpoints для клиентов
# ------------------------------------------------------------------------------
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin123
AWS_ENDPOINT_URL=http://localhost:9000
AWS_DEFAULT_REGION=us-east-1

# ------------------------------------------------------------------------------
# ClearML Agent Configuration
# ------------------------------------------------------------------------------
CLEARML_API_HOST=http://localhost:8008
CLEARML_WEB_HOST=http://localhost:8008
CLEARML_FILES_HOST=http://localhost:8081

# ------------------------------------------------------------------------------
# DVC Configuration
# ------------------------------------------------------------------------------
DVC_REMOTE_NAME=minio
DVC_REMOTE_URL=s3://dvc-storage
DVC_S3_ENDPOINT=http://minio:9000

# ------------------------------------------------------------------------------
# Временные зоны и локали
# ------------------------------------------------------------------------------
TZ=Europe/Moscow
LANG=en_US.UTF-8
LC_ALL=en_US.UTF-8

# ------------------------------------------------------------------------------
# Ресурсы для контейнеров (опционально)
# ------------------------------------------------------------------------------
JENKINS_MEMORY_LIMIT=2g
JENKINS_CPU_LIMIT=2

POSTGRES_MEMORY_LIMIT=4g
POSTGRES_CPU_LIMIT=2

CLEARML_MEMORY_LIMIT=4g
CLEARML_CPU_LIMIT=4

ELASTICSEARCH_MEMORY_LIMIT=4g
ELASTICSEARCH_CPU_LIMIT=2

# ------------------------------------------------------------------------------
# Версии образов (для воспроизводимости)
# ------------------------------------------------------------------------------
JENKINS_IMAGE_TAG=jenkins/jenkins:lts-jdk11
POSTGRES_IMAGE_TAG=postgres:15
CLEARML_IMAGE_TAG=allegroai/clearml:latest
MINIO_IMAGE_TAG=minio/minio:latest
LAKEFS_IMAGE_TAG=treeverse/lakefs:latest
LABEL_STUDIO_IMAGE_TAG=heartexlabs/label-studio:latest
GITLAB_IMAGE_TAG=gitlab/gitlab-ce:latest
SONARQUBE_IMAGE_TAG=sonarqube:lts-community
NEXUS_IMAGE_TAG=sonatype/nexus3:latest
ELASTICSEARCH_IMAGE_TAG=docker.elastic.co/elasticsearch/elasticsearch:8.11.0
KIBANA_IMAGE_TAG=docker.elastic.co/kibana/kibana:8.11.0
LOGSTASH_IMAGE_TAG=docker.elastic.co/logstash/logstash:8.11.0
REDIS_IMAGE_TAG=redis:7-alpine

# ==============================================================================
# Безопасность (изменить в продакшене!)
# ==============================================================================

# Секреты для продакшена должны быть:
# - Генерироваться автоматически
# - Храниться в vault/secret manager
# - Не коммититься в репозиторий

# Для разработки используем эти значения, но в продакшене ЗАМЕНИТЬ:
DEV_SECRET_KEY=change_this_in_production_123
DEV_DB_PASSWORD=change_this_in_production_456
DEV_ENCRYPTION_KEY=change_this_in_production_789

# ==============================================================================
# Флаги функций
# ==============================================================================
ENABLE_SSL=false
ENABLE_BACKUP=true
ENABLE_MONITORING=true
ENABLE_LOGGING=true

# ==============================================================================
# Пути для бэкапов
# =============================================================================-
BACKUP_DIR=/var/backups
LOG_DIR=/var/log
DATA_DIR=/var/data




# ------------------------------------------------------------------------------
# JupyterHub
# ------------------------------------------------------------------------------
JUPYTERHUB_PORT=8000
JUPYTERHUB_ADMIN_USER=admin
JUPYTERHUB_ADMIN_PASSWORD=jupyterhub123
JUPYTERHUB_PROXY_SECRET=jh_proxy_secret_456
JUPYTERHUB_COOKIE_SECRET=jh_cookie_secret_789
JUPYTERHUB_SPAWNER_CLASS=dockerspawner.DockerSpawner
JUPYTERHUB_CONTAINER_IMAGE=jupyter/tensorflow-notebook:latest
JUPYTERHUB_NETWORK_NAME=devops-network

# ------------------------------------------------------------------------------
# Apache Zeppelin
# ------------------------------------------------------------------------------
ZEPPELIN_PORT=8030
ZEPPELIN_ADMIN_USER=admin
ZEPPELIN_ADMIN_PASSWORD=zeppelin123
ZEPPELIN_NOTEBOOK_DIR=/opt/zeppelin/notebook
ZEPPELIN_INTERPRETER_DIR=/opt/zeppelin/interpreter
ZEPPELIN_SPARK_MASTER=local[*]
ZEPPELIN_SPARK_HOME=/opt/spark
ZEPPELIN_PYTHON_PATH=/usr/bin/python3

# ------------------------------------------------------------------------------
# Версии образов
# ------------------------------------------------------------------------------
JUPYTERHUB_IMAGE_TAG=jupyterhub/jupyterhub:latest
ZEPPELIN_IMAGE_TAG=apache/zeppelin:0.10.1



# ------------------------------------------------------------------------------
# Keycloak Identity and Access Management
# ------------------------------------------------------------------------------
KEYCLOAK_PORT=8085
KEYCLOAK_ADMIN_USER=admin
KEYCLOAK_ADMIN_PASSWORD=keycloak123
KEYCLOAK_DB_NAME=keycloak
KEYCLOAK_REALM=mlplatform
KEYCLOAK_CLIENT_ID=ml-platform
KEYCLOAK_CLIENT_SECRET=ml-platform-secret
KEYCLOAK_IMAGE_TAG=quay.io/keycloak/keycloak:24.0.2



# ------------------------------------------------------------------------------
# Spark HA Configuration
# ------------------------------------------------------------------------------
SPARK_HA_ENABLED=true
SPARK_MASTER_URL=spark://spark-master-1:7077,spark-master-2:7077,spark-master-3:7077
SPARK_WORKER_CORES=2
SPARK_WORKER_MEMORY=2g
ZOOKEEPER_HOSTS=zookeeper:2181

# Livy Configuration
LIVY_PORT=8998
LIVY_HOST=livy

# Monitoring
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000



#####################

SPARK_MASTER_PORT=7077
SPARK_WEBUI_PORT=8081
SPARK_HISTORY_PORT=18080
